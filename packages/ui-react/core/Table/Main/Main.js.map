{"version":3,"sources":["../../../src/Table/Main/Main.js"],"names":["HvTable","props","id","sorted","state","sortInfo","filter","item","length","desc","tableState","onFetchData","initiallyLoaded","sortedFromState","pageSize","page","cursor","defaultSorted","pages","classes","cellHeight","columns","data","defaultPageSize","headerHeight","resizable","onPageSizeChange","composedStyles","theme","ColumnSettings","ReactTableDefaults","column","style","height","headerStyle","Header","Sorted","getSortedComponent","rtSortIcon","headerText","Object","assign","setState","ReactTablePagination","onFetchDataInternal","React","Component","propTypes","PropTypes","instanceOf","isRequired","number","bool","pageText","string","defaultProps"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2018 Hitachi Vantara Corporation.\n *\n *  The copyright to the computer software herein is the property of\n *  Hitachi Vantara Corporation. The software may be used and/or copied only\n *  with the written permission of Hitachi Vantara Corporation or in accordance\n *  with the terms and conditions stipulated in the agreement/contract\n *  under which the software has been supplied.\n */\n\nimport React from \"react\";\nimport ReactTable from \"react-table\";\nimport PropTypes from \"prop-types\";\nimport { ReactTableDefaults } from \"react-table\";\n\nimport ReactTablePagination from \"../Pagination\";\nimport SortAsc from \"react-icons/lib/fa/sort-asc\";\nimport SortDesc from \"react-icons/lib/fa/sort-desc\";\n\nimport \"react-table/react-table.css\";\nimport styles from \"./styles.js\";\n\nclass HvTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sorted: props.defaultSorted || [],\n      pages: null,\n      initiallyLoaded: false\n    };\n  }\n\n  componentDidMount() {\n    const { initiallyLoaded } = this.state;\n    if (!initiallyLoaded) {\n      this.state.initiallyLoaded = true;\n    }\n  }\n\n  getSortedComponent = id => {\n    const { sorted } = this.state;\n\n    const sortInfo = sorted.filter(item => item.id === id);\n\n    if (sortInfo.length) {\n      if (sortInfo[0].desc === true) return <SortDesc />;\n      if (sortInfo[0].desc === false) return <SortAsc />;\n    }\n    return false;\n  };\n\n  onFetchDataInternal = tableState => {\n    const { onFetchData } = this.props;\n    const { initiallyLoaded, sorted: sortedFromState } = this.state;\n    const { pageSize, page, sorted } = tableState;\n\n    if(initiallyLoaded) {\n      let cursor = `${page * pageSize}`;\n\n      if(sortedFromState[0] !== sorted[0]) {\n        cursor = \"0\";\n      }\n\n      onFetchData(cursor, pageSize, sorted);\n    }\n  };\n\n  render() {\n    const {\n      classes,\n      cellHeight,\n      columns,\n      data,\n      defaultPageSize,\n      defaultSorted,\n      headerHeight,\n      resizable,\n      onPageSizeChange,\n      pages\n    } = this.props;\n\n    const composedStyles = styles(this.props.theme);\n\n    const ColumnSettings = {\n      ...ReactTableDefaults.column,\n      style: { height: cellHeight },\n      headerStyle: { height: headerHeight },\n      Header: props => {\n        const Sorted = this.getSortedComponent(props.column.id);\n        return (\n          <React.Fragment>\n            {Sorted && <span className={classes.rtSortIcon}>{Sorted}</span>}\n            <span>{props.column.headerText}</span>\n          </React.Fragment>\n        );\n      }\n    };\n\n    Object.assign(ReactTableDefaults, {\n      column: ColumnSettings,\n      resizable,\n      defaultPageSize\n    });\n\n    return (\n      <ReactTable\n        {...composedStyles}\n        data={data}\n        onSortedChange={sorted => this.setState({ sorted })}\n        columns={columns}\n        className=\"-highlight\"\n        PaginationComponent={ReactTablePagination}\n        manual\n        onFetchData={this.onFetchDataInternal}\n        onPageSizeChange={onPageSizeChange}\n        pages={pages}\n        defaultSorted={defaultSorted}\n      />\n    );\n  }\n}\n\nHvTable.propTypes = {\n  columns: PropTypes.instanceOf(Object).isRequired,\n  data: PropTypes.instanceOf(Object).isRequired,\n  defaultPageSize: PropTypes.number,\n  resizable: PropTypes.bool,\n  pageText: PropTypes.string\n};\n\nHvTable.defaultProps = {\n  columns: [],\n  data: [],\n  defaultPageSize: 10,\n  resizable: true,\n  pageText: \"\"\n};\n\nexport default HvTable;\n"],"file":"Main.js"}